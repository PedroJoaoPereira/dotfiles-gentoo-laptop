# custom i3 configurations and keybindings

# set leader key - SUPER
set $mod Mod4

# ----- ----- ----- ----- -----

# constants
set $gaps 12

# desktop setup
set $audioServer gentoo-pipewire-launcher restart
set $compositor picom --daemon
set $wallpaper feh --bg-fill --randomize ~/.wallpaper/* 
set $statusBar ~/.config/polybar/launch

set $launcher rofi -show-icons
set $terminal alacritty
set $browser google-chrome-stable --enable-features=TouchpadOverscrollHistoryNavigation --hide-crash-restore-bubble

# ----- ----- ----- ----- -----

# set font
font pango:Hack Nerd Font Mono 8

# disable borders
default_border pixel 0
default_floating_border pixel 0
# remove title bar
for_window [class=.*] border pixel 0

# set window gaps
gaps inner $gaps

# drag floating windows with mouse - $mod + mouse
floating_modifier Control

# ----- ----- ----- ----- -----

# controller mode for system administration
mode "Admin" {
        # back to normal: Enter or Escape or same keybinding to enter
        bindsym Escape mode "default"
        bindsym $mod+Escape mode "default"

	# reset gaps - backspace
	bindsym 0 gaps inner current set $gaps
	# increase gaps - +
	bindsym plus gaps inner current plus 4
	# decrease gaps - -
	bindsym minus gaps inner current minus 4

	# reboot - delete
	bindsym Delete exec --no-startup-id i3-msg 'exec doas reboot'
	# shutdown - return
	bindsym Return exec --no-startup-id i3-msg 'exec doas shutdown -h now'

	# reload the configuration file - r
	bindsym r reload
	# restart i3 inplace - shift + r
	bindsym Shift+r restart
	# exit i3 - shift + c
	bindsym Shift+c exec --no-startup-id i3-msg 'exit'
}
# enter 'admin' mode - SUPER + escape
bindsym $mod+Escape mode "Admin"

# ----- ----- ----- ----- -----

# adjust pipewire volume - sound keys xf86
bindsym XF86AudioMute exec --no-startup-id wpctl set-mute @DEFAULT_SINK@ toggle && polybar-msg cmd restart 
bindsym XF86AudioMicMute exec --no-startup-id wpctl set-mute @DEFAULT_SOURCE@ toggle && polybar-msg cmd restart
bindsym XF86AudioRaiseVolume exec --no-startup-id wpctl set-volume @DEFAULT_SINK@ 10%+ && polybar-msg cmd restart
bindsym XF86AudioLowerVolume exec --no-startup-id wpctl set-volume @DEFAULT_SINK@ 10%- && polybar-msg cmd restart

# adjust screen backlight - brightness keys xf86
bindsym XF86MonBrightnessUp exec --no-startup-id  "xbacklight +10"
bindsym XF86MonBrightnessDown exec --no-startup-id "xbacklight -10"

# ----- ----- ----- ----- -----

# change focus - SUPER + vi and arrow keys
bindsym $mod+h focus left
bindsym $mod+Left focus left
bindsym $mod+j focus down
bindsym $mod+Down focus down
bindsym $mod+k focus up
bindsym $mod+Up focus up
bindsym $mod+l focus right
bindsym $mod+Right focus right

# move focused window - SUPER + shift + vi and arrow keys
bindsym $mod+Shift+h move left
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+Right move right

# ----- ----- ----- ----- -----

# toggle fullscreen - SUPER + f
bindsym $mod+f fullscreen toggle
# toggle split - SUPER + s
bindsym $mod+s layout toggle split
# toggle float - SUPER + shift + f
bindsym $mod+Shift+f floating toggle

# change focus between tiling / floating windows
#bindsym $mod+space focus mode_toggle

# ----- ----- ----- ----- -----

# resizing mode
mode "Resize" {
        # back to normal: Enter or Escape or same keybinding to enter
        bindsym Escape mode "default"
        bindsym $mod+Escape mode "default"
        bindsym $mod+r mode "default"

	# change horizontal size - plus and minus sign
	bindsym minus resize shrink width 4 px or 4 ppt
	bindsym plus resize grow width 4 px or 4 ppt

	# change vertical size - up and down
	bindsym Down resize shrink height 4 px or 4 ppt
	bindsym Up resize grow height 4 px or 4 ppt
}
bindsym $mod+r mode "Resize"

# ----- ----- ----- ----- -----

# set all workspaces
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws0 "0"

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws0

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws0

# ----- ----- ----- ----- -----

# kill window - SUPER + c
bindsym $mod+c kill
# start menu launcher - SUPER
bindcode --release 133 exec --no-startup-id $launcher -show drun
# start menu launcher hooker - SUPER + p
bindsym $mod+p exec --no-startup-id $launcher -show window
# start menu ssh launcher - SUPER + shift + p
bindsym $mod+Shift+p exec --no-startup-id $launcher -show ssh
# start terminal - SUPER + t
bindsym $mod+t exec --no-startup-id $terminal

# ----- ----- ----- ----- -----

# start pipewire audio
exec_always --no-startup-id $audioServer
# x compositor for rounded corners and transparency
exec_always --no-startup-id $compositor
# start wallpaper manager
exec_always --no-startup-id $wallpaper
# top status bar
exec_always --no-startup-id $statusBar

# start applications on boot
exec --no-startup-id i3-msg 'workspace 2; append_layout ~/.config/i3/layouts/workspace-2.json; exec $browser; workspace 1'
exec --no-startup-id i3-msg 'workspace 3; append_layout ~/.config/i3/layouts/workspace-3.json; exec $terminal; workspace 1'
exec --no-startup-id i3-msg 'workspace 1'

